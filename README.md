Latam Hackathon

# 1. Overview
## 1.1 Project Goal 
DREx aims to open up the renewables investment sector in the Latam region by making it easier for investors to (1) invest in renewable energy assets and (2) interface with and track their renewable energy investments. 
* <ins>Aim 1</ins>: Onboard renewable IoT devices to the blockchain such that sensors provide an immutable and verifiable way of tracking energy usage, thus providing investors with transparent and digital ownership of their investments
* <ins>Aim 2</ins>: Use the revenue stream generated by investors to create a conservation fund and creation of I-REC certificates

## 1.2 Approach 
We will conduct a pilot study where a solar minigrid is constructed in Guayaquil, Ecuador. The minigrid sensors will be onboarded to the Robonomics blockchain in the Kusama ecosystem, and data will be passed via an [off-chain worker (OCW)](https://docs.substrate.io/reference/how-to-guides/offchain-workers/) from Robonomics to the Moonriver blockchain periodically (currently once every day). Once sensor data has been passed to Moonriver, smart contracts will allocate an amount of DREx tokens (equivalent to kiloWatts generated by the minigrid per day) to a NFT contract pool, to which users only have access to upon ownership of an associated NFT. 

![Figure: DREx pipeline overview](./imgs/overview.png "*Figure 1*: DREx pipeline overview")

# 2.  Hackathon
### 2.1 Goal
The goal of this hackathon was to establish the foundations upon which we could construct a minimum viable product (MVP). As such, work was consolidated into five sectors:

1.	Construction of a solar minigrid based out of Guayaquil, Ecuador
2.	Onboarding solar minigrid sensor data to Robonomics blockchain
3.	Message passing between Robonomics and Moonriver via XCM
4.	Smart contract development for Moonriver
5.	Front-end and back-end development 

## 2.2 Implementation
We break down each of the above tasks into their technical components:

### *2.2.1. Construction of a solar minigrid based out of Guayaquil, Ecuador*
  A solar minigrid setup with the following technical specifications will be bought and installed:
  1. Two [Jinko solar PV panels](https://www.solarmaxstore.com/jinko-solar-450-watt-tiger-bifcial-mono-perc-solar-panel-clear-frame-white-backsheet-bow-156-half-cell.html) at 450Wp each 
  2. [Micro inverter WVC-600 240 Vac Output](https://www.amazon.com/MarsRock-Waterproof-Inverter-AC80-160V-Efficiency/dp/B075M8J35S)
  3. [SEM ONE - Pickdata 10A current transformer](https://www.pickdata.net/sites/default/files/Manual_SEM_One_V08-191218-EN.pdf)
  4. [Raspberry Pi 3](https://www.raspberrypi.com/products/raspberry-pi-3-model-b/) with industrial modbus pe2a

  and a deployment script which reads the voltage and ampere reigsters from the modbus map of the energy meter, SEM ONE will compute the accumulated energy at minute intervals.

### *2.2.2 Onboarding solar minigrid data to Robonomics blockchain*
Robonomics will be flashed via a prepared image onto an Ubuntu operating system and installed on a Raspberry Pi such that sensor data can be detected and sent to Robonomics. A deployment script will be written to facilitate interaction with the sensor data.

### *2.2.3. Message passing between Robonomics and Moonriver via XCM*
A local development network will be established on which to test integration. This development network consists of a Kusama relay chain with four validators, and two test parachains, one a [Robonomics development chain](https://github.com/airalab/robonomics) and the other a [Moonriver development chain](https://evmdocs.acala.network/network/network-setup/local-development-network). Each parachain will host one collator node, for simplicity. The [ORML xTokens pallet](https://github.com/open-web3-stack/open-runtime-module-library/tree/master/xtokens) will be used in conjunction with [Polkadotâ€™s xcm-executor pallet](https://github.com/paritytech/polkadot/tree/master/xcm) to execute token passing between Robonomics and Moonriver development chains. A total supply of tokens representing kiloWatts and predetermined by the PPA for some number of years with the SME, will be minted on the Robonomics chain. These tokens will uniquely identify the project with which they are tied. 

### *2.2.4. Smart contract development for Moonriver*
Smart contracts will be written in Solidity and then deployed to Moonriver. The smart contract logic is as follows: once receiving the amount of tokens passed via XCM from Robonomics, the smart contracts deployed on Moonriver will assign NFTs their proportional share of tokens i.e. number of DREx tokens generated divided by the number of NFTs minted for a given project, in our pilot study this number is one.
 
### *2.2.5. Front-end and back-end development*
React.js with JSX, along with @polkadot/api, mapbox-gl, recharts, and scrollreveal libraries will be used to construct the user interface. A REST API will be created to allow the front-end to pull sensor data from the back-end off the Raspberry Pi. The back-end services will be hosted on AWS and implemented in Java. 

## 2.3. Achievements
Our team was able to make major progress in all tasks, notably:
1. A solar minigrid was built in Guayaquil, Ecuador
2. Minigrid sensor data was onboarded successfully to Robonomics 
3. A local development network was successfully established and XCM message sent between test parachains
4. Solidity smart contracts written to facilitate NFT minting and DREx token generation and claim logic
5. Front-end and back-end development concluded to produce working user interface, connected to Polkadot-js

## 2.4. Challenges 


## 2.5. Future Work


# 3. Installation
## Directories
* <code>[./robonomics_onboarding](./robonomics_onboarding)</code>: Code for grid sensor onbaording and minigrid sensor deployment scripts
* <code>[./asset_transfer](./asset_transfer)</code>: Code for explored approaches for asset transfer with XCM, OCW, oracles 
* <code>[./nft_smart_contracts](./nft_smart_contracts)</code>: Moonriver smart contract solidity files as well as deployment code
* <code>[./front_end](./front_end)</code>: Code for UI/UX deployment, connected via REST API to back-end
* <code>[./back_end](./back_end)</code>: Code for back-end deployment
* <code>[./imgs](./imgs)</code>: Reference images

## Getting Started
Please refer to the READMEs in each directory for installation and setup.

## Support
For any questions contact us at drexallnet@gmail.com.

## License
See the [LICENSE](./LICENSE) file for license rights and limitations (Apache License).
